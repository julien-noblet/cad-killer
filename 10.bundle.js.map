{"version":3,"sources":["webpack:///./src/js/reverseLabel.js"],"names":["L","Control","ReverseLabel","extend","options","position","onAdd","container","DomUtil","create","reverse","PhotonReverse","url","REVERSE_URL","handleResults","data","features","properties","innerHTML","label","window","map","on","getZoom","doReverse","getCenter","head","document","getElementById","className","addTo"],"mappings":"0FAAA,mCASAA,IAAEC,QAAQC,aAAeF,IAAEC,QAAQE,OAAO,CACxCC,QAAS,CACPC,SAAU,YAGZC,MAAO,WACL,IAAMC,EAAYP,IAAEQ,QAAQC,OAAO,MAAO,iBACpCC,EAAU,IAAIV,IAAEW,cAAc,CAClCC,IAAKC,IACLC,cAAe,SAACC,GACQ,OAAlBA,EAAKC,UACkB,OAArBD,EAAKC,SAAS,IACoB,OAAhCD,EAAKC,SAAS,GAAGC,aACnBV,EAAUW,UAAV,6BAA4CH,EAAKC,SAAS,GAAGC,WAAWE,MAAxE,SAsBV,OAfAC,OAAOC,IAAIC,GAAG,WAAW,WACvB,GAAIF,OAAOC,IAAIE,UAAY,GAAI,CAC7Bb,EAAQc,UAAUJ,OAAOC,IAAII,aAC7B,IAAIC,EAAOC,SAASC,eAAe,QAC/BP,EAAMM,SAASC,eAAe,OACrB,OAATF,IACFA,EAAKG,WAAa,eAER,OAARR,IACFA,EAAIQ,WAAa,gBAGnBtB,EAAUW,UAAY,MAGnBX,MAIX,IAAIP,IAAEC,QAAQC,cAAe4B,MAAMV,OAAOC","file":"10.bundle.js","sourcesContent":["/**\n * @flow\n *\n * @format\n */\n\nimport L from \"leaflet\";\nimport { REVERSE_URL } from \"./config\";\n\nL.Control.ReverseLabel = L.Control.extend({\n  options: {\n    position: \"topright\", // hack\n  },\n\n  onAdd: () => {\n    const container = L.DomUtil.create(\"div\", \"reverse-label\");\n    const reverse = new L.PhotonReverse({\n      url: REVERSE_URL,\n      handleResults: (data) => {\n        if (data.features !== null) {\n          if (data.features[0] !== null) {\n            if (data.features[0].properties !== null) {\n              container.innerHTML = `Carte centrée sur «${data.features[0].properties.label}»`;\n            }\n          }\n        }\n      },\n    });\n\n    window.map.on(\"moveend\", () => {\n      if (window.map.getZoom() > 14) {\n        reverse.doReverse(window.map.getCenter());\n        let head = document.getElementById(\"head\");\n        let map = document.getElementById(\"map\");\n        if (head !== null) {\n          head.className += \" headmasked\";\n        }\n        if (map !== null) {\n          map.className += \" nohead\";\n        }\n      } else {\n        container.innerHTML = \"\";\n      }\n    });\n    return container;\n  },\n});\n\nnew L.Control.ReverseLabel().addTo(window.map);\n"],"sourceRoot":""}