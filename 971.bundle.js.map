{"version":3,"file":"971.bundle.js","mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEAA,qEAAA,GAAyBA,6DAAA,CAAiB;AACxCK,EAAAA,OAAO,EAAE;AACPC,IAAAA,QAAQ,EAAE,UADH,CACe;;AADf,GAD+B;AAKxCC,EAAAA,KAAK,EAAE,iBAAM;AACX,QAAMC,SAAS,GAAGR,6DAAA,CAAiB,KAAjB,EAAwB,eAAxB,CAAlB;AACA,QAAMW,OAAO,GAAG,IAAIX,8DAAJ,CAAoB;AAClCa,MAAAA,GAAG,EAAEZ,0DAD6B;AAElCa,MAAAA,aAAa,EAAE,uBAACC,IAAD,EAAU;AACvB,YAAIA,IAAI,CAACC,QAAL,KAAkB,IAAtB,EAA4B;AAC1B,cAAID,IAAI,CAACC,QAAL,CAAc,CAAd,MAAqB,IAAzB,EAA+B;AAC7B,gBAAID,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiBC,UAAjB,KAAgC,IAApC,EAA0C;AACxCT,cAAAA,SAAS,CAACU,SAAV,sCAA4CH,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiBC,UAAjB,CAA4BE,KAAxE;AACD;AACF;AACF;AACF;AAViC,KAApB,CAAhB;AAaAC,IAAAA,MAAM,CAACC,GAAP,CAAWC,EAAX,CAAc,SAAd,EAAyB,YAAM;AAC7B,UAAIF,MAAM,CAACC,GAAP,CAAWE,OAAX,KAAuB,EAA3B,EAA+B;AAC7BZ,QAAAA,OAAO,CAACa,SAAR,CAAkBJ,MAAM,CAACC,GAAP,CAAWI,SAAX,EAAlB;AACA,YAAIC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAX;AACA,YAAIP,GAAG,GAAGM,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAV;;AACA,YAAIF,IAAI,KAAK,IAAb,EAAmB;AACjBA,UAAAA,IAAI,CAACG,SAAL,IAAkB,aAAlB;AACD;;AACD,YAAIR,GAAG,KAAK,IAAZ,EAAkB;AAChBA,UAAAA,GAAG,CAACQ,SAAJ,IAAiB,SAAjB;AACD;AACF,OAVD,MAUO;AACLrB,QAAAA,SAAS,CAACU,SAAV,GAAsB,EAAtB;AACD;AACF,KAdD;AAeA,WAAOV,SAAP;AACD;AApCuC,CAAjB,CAAzB;AAuCA,IAAIR,qEAAJ,GAA6B8B,KAA7B,CAAmCV,MAAM,CAACC,GAA1C","sources":["webpack://cad-killer/./src/js/reverseLabel.js"],"sourcesContent":["/**\n * @flow\n *\n * @format\n */\n\nimport L from \"leaflet\";\nimport { REVERSE_URL } from \"./config\";\n\nL.Control.ReverseLabel = L.Control.extend({\n  options: {\n    position: \"topright\", // hack\n  },\n\n  onAdd: () => {\n    const container = L.DomUtil.create(\"div\", \"reverse-label\");\n    const reverse = new L.PhotonReverse({\n      url: REVERSE_URL,\n      handleResults: (data) => {\n        if (data.features !== null) {\n          if (data.features[0] !== null) {\n            if (data.features[0].properties !== null) {\n              container.innerHTML = `Carte centrée sur «${data.features[0].properties.label}»`;\n            }\n          }\n        }\n      },\n    });\n\n    window.map.on(\"moveend\", () => {\n      if (window.map.getZoom() > 14) {\n        reverse.doReverse(window.map.getCenter());\n        let head = document.getElementById(\"head\");\n        let map = document.getElementById(\"map\");\n        if (head !== null) {\n          head.className += \" headmasked\";\n        }\n        if (map !== null) {\n          map.className += \" nohead\";\n        }\n      } else {\n        container.innerHTML = \"\";\n      }\n    });\n    return container;\n  },\n});\n\nnew L.Control.ReverseLabel().addTo(window.map);\n"],"names":["L","REVERSE_URL","Control","ReverseLabel","extend","options","position","onAdd","container","DomUtil","create","reverse","PhotonReverse","url","handleResults","data","features","properties","innerHTML","label","window","map","on","getZoom","doReverse","getCenter","head","document","getElementById","className","addTo"],"sourceRoot":""}