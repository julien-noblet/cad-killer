{"version":3,"file":"963.bundle.js","mappings":"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","sources":["webpack://cad-killer/./src/js/config.js","webpack://cad-killer/./src/js/layers.js","webpack://cad-killer/./src/js/photon.js","webpack://cad-killer/./src/js/map.js"],"sourcesContent":["/**\n * @flow\n *\n * @format\n */\n\nexport const CENTER = [46.495, 2.201];\nexport const API_URL = \"//api-adresse.data.gouv.fr/search/?\";\nexport const REVERSE_URL = \"//api-adresse.data.gouv.fr/reverse/?\";\nexport const SHORT_CITY_NAMES = [\n  \"y\",\n  \"ay\",\n  \"bu\",\n  \"by\",\n  \"eu\",\n  \"fa\",\n  \"gy\",\n  \"oo\",\n  \"oz\",\n  \"py\",\n  \"ri\",\n  \"ry\",\n  \"sy\",\n  \"ur\",\n  \"us\",\n  \"uz\",\n];\nexport const ATTRIBUTIONS =\n  \"&copy; <a href='http://www.openstreetmap.org/copyright'>Contributeurs de OpenStreetMap</a> | <a href='https://www.data.gouv.fr/fr/datasets/base-d-adresses-nationale-ouverte-bano/'>Adresses BAN</a> sous licence ODbL\";\nexport const IGN_KEY = \"3sk4po838nk0byb23gft0qs5\";\nexport const IGN_LAYER = \"GEOGRAPHICALGRIDSYSTEMS.MAPS\";\nexport const IGN_LAYER_LITE = \"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2\";\nexport const IGN_ORTHO = \"ORTHOIMAGERY.ORTHOPHOTOS\";\nexport const MY_POUCHDB =\n  \"//sidercomourellydiforteep:16f21a8ad23f32de280b36fc338a38a24c5d49b2@couchdb-112956.smileupps.com/stats\";\nexport const LOCAL_POUCHDB = \"cad-killer\";\nexport const OSM_CREDITENTIALS = \"Q0FELUtJTExFUjpkdHl2dWRlbnQ=\";\nexport const NOTE_API = \"//api.openstreetmap.org/api/0.6/notes\";\n","/**\n * @flow\n *\n * @format\n */\n\nimport L from \"leaflet\";\nimport { IGN_KEY, IGN_LAYER } from \"./config\";\n\n// Layers\nexport const layerOSMfr: any = L.tileLayer(\n  \"//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 20,\n    attribution:\n      'Fond de plan &copy; <a href=\"https://openstreetmap.fr/\">OpenStreetMap France</a>',\n  }\n);\n\nexport const layerOSM: any = L.tileLayer(\n  \"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 19,\n    attribution:\n      'Fond de plan &copy; <a href=\"https://openstreetmap.org/\">OpenStreetMap</a>',\n  }\n);\n\n\n\nexport const layerBing: any = L.tileLayer(\n  \"http://tile.stamen.com/bing-lite/{z}/{x}/{y}.jpg\",\n  {\n    maxZoom: 18,\n    attribution:\n      'Vue satellite &copy; <a href=\"https://bing.com/\">Bing</a> via Stamen',\n  }\n);\n\nexport const layerBoner: any = L.tileLayer(\n  \"http://tile.stamen.com/boner/{z}/{x}/{y}.jpg\",\n  {\n    maxZoom: 18,\n    attribution:\n      'Vue satellite &copy; <a href=\"https://bing.com/\">Bing</a> via Stamen',\n  }\n);\n\nexport const layerCadastre: any = L.tileLayer(\n  \"http://tms.cadastre.openstreetmap.fr/*/tout/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 22,\n    minZoom: 16,\n    attribution: \"&copy; Cadastre\",\n  }\n);\n\nexport const overlayCadastre: any = L.tileLayer(\n  \"http://tms.cadastre.openstreetmap.fr/*/transp/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 22,\n    minZoom: 16,\n    attribution: \"&copy; Cadastre\",\n  }\n);\n\nexport const layerEsriWorldImagery: any = L.tileLayer(\n  \"//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\",\n  {\n    attribution:\n      \"&copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\",\n  }\n);\n\nexport const layerIGN: any = L.tileLayer(\n  `//wxs.ign.fr/${IGN_KEY}/geoportail/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${IGN_LAYER}&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=image%2Fjpeg`,\n  {\n    maxZoom: 18,\n    minZoom: 6,\n    attribution: 'IGN-F/Géoportail',\n  }\n);\n\nexport const overlayBAN: any = L.tileLayer(\n  \"//{s}.layers.openstreetmap.fr/bano/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 20,\n    attribution: \"Surcouche: &copy; BAN(O)\",\n  }\n);\n\nexport const baseMaps = {\n  \"OpenStreetMap France\": layerOSMfr,\n  OpenStreetMap: layerOSM,\n  \"Carte IGN\": layerIGN,\n  \"Plan IGN\": layerIGNlite,\n  \"Orthophoto IGN\": layerIGNortho,\n  Bing: layerBing,\n  \"Bing+OSM\": layerBoner,\n  Cadastre: layerCadastre,\n  Esri: layerEsriWorldImagery,\n};\n\nexport const overlayMaps = {\n  Cadastre: overlayCadastre,\n  \"BAN(O)\": overlayBAN,\n};\n","/**\n * @flow\n *\n * @format\n */\n\nimport L from \"leaflet\";\nimport { API_URL, SHORT_CITY_NAMES } from \"./config\";\n//import { sendClick, sendSearch } from \"./stats\";\n\nrequire(\"leaflet.photon\");\n/**\n * Un grand merci a @etalab, @yohanboniface, @cquest sans qui ce projet n'existerai pas.\n * Une grande partie de ce code vient de @etalab/adresse.data.gouv.fr\n */\n\nconst searchPoints = L.geoJson(null, {\n  onEachFeature: (feature, layer) => {\n    layer.on(\"click\", () => {\n      let zoom = 16;\n      switch (feature.properties.type) {\n        case \"housenumber\":\n          zoom = 18;\n          break;\n        case \"street\":\n          zoom = 16;\n          break;\n        case \"village\":\n          zoom = 12;\n          break;\n        case \"city\":\n          zoom = 12;\n          break;\n        case \"locality\":\n          zoom = 16;\n          break;\n        case \"hamlet\":\n          zoom = 16;\n          break;\n        case \"commune\":\n          zoom = 12;\n          break;\n        default:\n          zoom = 16;\n      }\n      window.map.setView(\n        [feature.geometry.coordinates[1], feature.geometry.coordinates[0]],\n        zoom\n      );\n      // sendClick(feature); // Stats are not working\n    });\n    layer.bindPopup(\n      `${feature.properties.name}<a class='geo' href='geo:${feature.geometry.coordinates[1]},${feature.geometry.coordinates[0]}'><i class='zmdi-navigation zmdi-2x'></i></a>`\n    );\n  },\n});\n\nfunction showSearchPoints(geojson) {\n  searchPoints.clearLayers();\n  searchPoints.addData(geojson);\n}\n\nfunction formatResult(feature, el) {\n  const details = [];\n  const detailsContainer = L.DomUtil.create(\"small\", \"\", el);\n  const title = L.DomUtil.create(\"strong\", \"\", el);\n  const types = {\n    housenumber: \"numéro\",\n    street: \"rue\",\n    locality: \"lieu-dit\",\n    hamlet: \"hamlet\", // TODO: Hameau?\n    village: \"village\",\n    city: \"ville\",\n    commune: \"commune\",\n  };\n  title.innerHTML = feature.properties.name;\n  if (types[feature.properties.type]) {\n    L.DomUtil.create(\"span\", \"type\", title).innerHTML =\n      types[feature.properties.type];\n  }\n  if (\n    feature.properties.city &&\n    feature.properties.city !== feature.properties.name\n  ) {\n    details.push(feature.properties.city);\n  }\n  if (feature.properties.context) {\n    details.push(feature.properties.context);\n  }\n  detailsContainer.innerHTML = details.join(\", \");\n}\n\nconst photonControlOptions = {\n  resultsHandler: showSearchPoints,\n  placeholder: \"Ex. 6 quai de la tourelle cergy…\",\n  position: \"topright\",\n  url: API_URL,\n  formatResult,\n  noResultLabel: \"Aucun résultat\",\n  feedbackLabel: \"Signaler\",\n  feedbackEmail: \"julien.noblet+cad-killer@gmail.com\",\n  minChar: (val) => SHORT_CITY_NAMES.indexOf(val) !== -1 || val.length >= 3,\n  submitDelay: 200,\n};\n\n/*\n// not need\nconst photonReverseControlOptions = {\n  resultsHandler: showSearchPoints,\n  position: \"topleft\",\n  url: REVERSE_URL,\n  formatResult,\n  noResultLabel: \"Aucun résultat\",\n  tooltipLabel: \"Cliquer sur la carte pour obtenir l'adresse\"\n};\n*/\n\nconst myPhoton = new L.Control.Photon(photonControlOptions);\n\nexport function photon() {\n  searchPoints.addTo(window.map);\n\n  window.map.addControl(myPhoton);\n  /* eslint-disable no-proto */\n  myPhoton.search.__proto__.setChoice = function setChoice(choice) {\n    const c = choice || this.RESULTS[this.CURRENT];\n    if (c) {\n      // sendSearch(c.feature); // Stats are not working\n      this.hide();\n      this.input.value = \"\";\n      this.fire(\"selected\", { choice: c.feature });\n      this.onSelected(c.feature);\n    }\n  };\n  /* eslint-enable no-proto*/\n}\n","/**\n * @flow\n *\n * @format\n */\n\nimport L from \"leaflet\";\nimport { ATTRIBUTIONS, CENTER } from \"./config\";\nimport { overlayMaps, baseMaps, layerOSMfr } from \"./layers\";\n//import { dbinfo } from \"./stats\"; // Stats are not working :'(\nimport { photon } from \"./photon\";\n\nrequire(\"leaflet-hash\");\nrequire(\"leaflet.browser.print/dist/leaflet.browser.print.min.js\");\n/**\n * Un grand merci a @etalab, @yohanboniface, @cquest sans qui ce projet n'existerai pas.\n * Une grande partie de ce code vient de @etalab/adresse.data.gouv.fr\n */\n\n// connection à la BD:\n// dbinfo(); // Stats are not working :'(\n\n// Initialisation de leaflet\nwindow.map = L.map(\"map\", {\n  attributionControl: false,\n});\n\nconst layers = L.control.layers(baseMaps, overlayMaps);\n\nL.Icon.Default.imagePath = \"./images/\";\nwindow.map.addLayer(layerOSMfr);\n\nlayers.addTo(window.map);\n\nwindow.map.setView(CENTER, 6);\n\nwindow.map.dragging.enable();\n\nL.control\n  .attribution({\n    position: \"bottomleft\",\n    prefix: ATTRIBUTIONS,\n  })\n  .addTo(window.map);\n\n// ajout hash dans l'URL\nlet hash;\nhash = new L.Hash(window.map);\n\n// Chargement des modules:\n// require('./photon');\nphoton();\nrequire.ensure([\"./reverseLabel\"], function () {\n  require(\"./reverseLabel\");\n});\n/*\n// Removing notes because seems not working!\n// The loading of L.Draw cause also some fails with Jest!\nrequire.ensure([\"./notes\"], function() {\n  require(\"./notes\");\n});\n*/\n//require (\"./geoloc.js\")\n\n// ajout du bouton print\nL.control\n  .browserPrint({\n    printModes: [\n      L.control.browserPrint.mode.portrait(\"Portrait\", \"A4\"),\n      L.control.browserPrint.mode.landscape(\"Paysage\", \"A4\"),\n      L.control.browserPrint.mode.auto(\"Auto\", \"A4\"),\n      L.control.browserPrint.mode.custom(\"Séléctionnez la zone\", \"A4\"),\n    ],\n  })\n  .addTo(window.map);\n"],"names":["CENTER","API_URL","REVERSE_URL","SHORT_CITY_NAMES","ATTRIBUTIONS","IGN_KEY","IGN_LAYER","IGN_LAYER_LITE","IGN_ORTHO","MY_POUCHDB","LOCAL_POUCHDB","OSM_CREDITENTIALS","NOTE_API","L","layerOSMfr","tileLayer","maxZoom","attribution","layerOSM","layerBing","layerBoner","layerCadastre","minZoom","overlayCadastre","layerEsriWorldImagery","layerIGN","overlayBAN","baseMaps","OpenStreetMap","layerIGNlite","layerIGNortho","Bing","Cadastre","Esri","overlayMaps","require","searchPoints","geoJson","onEachFeature","feature","layer","on","zoom","properties","type","window","map","setView","geometry","coordinates","bindPopup","name","showSearchPoints","geojson","clearLayers","addData","formatResult","el","details","detailsContainer","DomUtil","create","title","types","housenumber","street","locality","hamlet","village","city","commune","innerHTML","push","context","join","photonControlOptions","resultsHandler","placeholder","position","url","noResultLabel","feedbackLabel","feedbackEmail","minChar","val","indexOf","length","submitDelay","myPhoton","Control","Photon","photon","addTo","addControl","search","__proto__","setChoice","choice","c","RESULTS","CURRENT","hide","input","value","fire","onSelected","attributionControl","layers","control","Icon","Default","imagePath","addLayer","dragging","enable","prefix","hash","Hash","ensure","browserPrint","printModes","mode","portrait","landscape","auto","custom"],"sourceRoot":""}