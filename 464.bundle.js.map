{"version":3,"file":"464.bundle.js","mappings":"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","sources":["webpack://cad-killer/./src/js/config.js","webpack://cad-killer/./src/js/layers.js","webpack://cad-killer/./src/js/photon.js","webpack://cad-killer/./src/js/map.js"],"sourcesContent":["/**\n * @format\n */\n\nexport const CENTER = [46.495, 2.201];\nexport const API_URL = \"//api-adresse.data.gouv.fr/search/?\";\nexport const REVERSE_URL = \"//api-adresse.data.gouv.fr/reverse/?\";\nexport const SHORT_CITY_NAMES = [\n  \"y\",\n  \"ay\",\n  \"bu\",\n  \"by\",\n  \"eu\",\n  \"fa\",\n  \"gy\",\n  \"oo\",\n  \"oz\",\n  \"py\",\n  \"ri\",\n  \"ry\",\n  \"sy\",\n  \"ur\",\n  \"us\",\n  \"uz\",\n];\nexport const ATTRIBUTIONS =\n  \"&copy; <a href='http://www.openstreetmap.org/copyright'>Contributeurs de OpenStreetMap</a> | <a href='https://www.data.gouv.fr/fr/datasets/base-d-adresses-nationale-ouverte-bano/'>Adresses BAN</a> sous licence ODbL\";\nexport const IGN_KEY = \"3sk4po838nk0byb23gft0qs5\";\nexport const IGN_LAYER = \"GEOGRAPHICALGRIDSYSTEMS.MAPS\";\nexport const IGN_LAYER_LITE = \"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2\";\nexport const IGN_ORTHO = \"ORTHOIMAGERY.ORTHOPHOTOS\";\nexport const MY_POUCHDB =\n  \"//sidercomourellydiforteep:16f21a8ad23f32de280b36fc338a38a24c5d49b2@couchdb-112956.smileupps.com/stats\";\nexport const LOCAL_POUCHDB = \"cad-killer\";\nexport const OSM_CREDITENTIALS = \"Q0FELUtJTExFUjpkdHl2dWRlbnQ=\";\nexport const NOTE_API = \"//api.openstreetmap.org/api/0.6/notes\";\n","/**\n * @format\n */\n\nimport L from \"leaflet\";\nimport { IGN_KEY, IGN_LAYER } from \"./config\";\n\n// Layers\nexport const layerOSMfr = L.tileLayer(\n  \"//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 20,\n    attribution:\n      'Fond de plan &copy; <a href=\"https://openstreetmap.fr/\">OpenStreetMap France</a>',\n  }\n);\n\nexport const layerOSM = L.tileLayer(\n  \"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 19,\n    attribution:\n      'Fond de plan &copy; <a href=\"https://openstreetmap.org/\">OpenStreetMap</a>',\n  }\n);\n\nexport const layerCadastre = L.tileLayer(\n  \"http://tms.cadastre.openstreetmap.fr/*/tout/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 22,\n    minZoom: 16,\n    attribution: \"&copy; Cadastre\",\n  }\n);\n\nexport const overlayCadastre = L.tileLayer(\n  \"http://tms.cadastre.openstreetmap.fr/*/transp/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 22,\n    minZoom: 16,\n    attribution: \"&copy; Cadastre\",\n  }\n);\n\nexport const layerEsriWorldImagery = L.tileLayer(\n  \"//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\",\n  {\n    attribution:\n      \"&copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\",\n  }\n);\n\n\nexport const layerEsriWorldStreetMap = L.tileLayer(\n  \"//server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}\",\n  {\n    attribution:\n    'Tiles &copy; Esri &mdash; ' +\n    'Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'\n  }\n);\n\nexport const layerIGN = L.tileLayer(\n  `//data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${IGN_LAYER}&STYLE=normal&FORMAT=image/jpeg&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}`,\n // `//wxs.ign.fr/${IGN_KEY}/geoportail/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${IGN_LAYER}&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=image%2Fjpeg`,\n  {\n    maxZoom: 18,\n    minZoom: 6,\n    attribution: 'IGN-F/Géoportail',\n    tileSize : 256 // les tuiles du Géooportail font 256x256px\n  }\n);\n\nexport const overlayBAN = L.tileLayer(\n  \"//{s}.layers.openstreetmap.fr/bano/{z}/{x}/{y}.png\",\n  {\n    maxZoom: 20,\n    attribution: \"Surcouche: &copy; BAN(O)\",\n  }\n);\n\nexport const baseMaps = {\n  \"OpenStreetMap France\": layerOSMfr,\n  OpenStreetMap: layerOSM,\n  // \"Carte IGN\": layerIGN, // je n'arrive pas a renouveller la clé IGN pour le moment\n  Cadastre: layerCadastre,\n  Esri: layerEsriWorldImagery,\n  \"World Street Map\" : layerEsriWorldStreetMap,\n};\n\nexport const overlayMaps = {\n  Cadastre: overlayCadastre,\n  \"BAN(O)\": overlayBAN,\n};\n","/**\n * @format\n */\n\nimport L from \"leaflet\";\nimport { API_URL, SHORT_CITY_NAMES } from \"./config\";\n//import { sendClick, sendSearch } from \"./stats\";\n\nrequire(\"leaflet.photon\");\n/**\n * Un grand merci a @etalab, @yohanboniface, @cquest sans qui ce projet n'existerai pas.\n * Une grande partie de ce code vient de @etalab/adresse.data.gouv.fr\n */\n\nconst searchPoints = L.geoJson(null, {\n  onEachFeature: (feature, layer) => {\n    layer.on(\"click\", () => {\n      let zoom = 16;\n      switch (feature.properties.type) {\n        case \"housenumber\":\n          zoom = 18;\n          break;\n        case \"street\":\n          zoom = 16;\n          break;\n        case \"village\":\n          zoom = 12;\n          break;\n        case \"city\":\n          zoom = 12;\n          break;\n        case \"locality\":\n          zoom = 16;\n          break;\n        case \"hamlet\":\n          zoom = 16;\n          break;\n        case \"commune\":\n          zoom = 12;\n          break;\n        default:\n          zoom = 16;\n      }\n      window.map.setView(\n        [feature.geometry.coordinates[1], feature.geometry.coordinates[0]],\n        zoom\n      );\n      // sendClick(feature); // Stats are not working\n    });\n    layer.bindPopup(\n      `${feature.properties.name}<a class='geo' href='geo:${feature.geometry.coordinates[1]},${feature.geometry.coordinates[0]}'><i class='zmdi-navigation zmdi-2x'></i></a>`\n    );\n  },\n});\n\nfunction showSearchPoints(geojson) {\n  searchPoints.clearLayers();\n  searchPoints.addData(geojson);\n}\n\nfunction formatResult(feature, el) {\n  const details = [];\n  const detailsContainer = L.DomUtil.create(\"small\", \"\", el);\n  const title = L.DomUtil.create(\"strong\", \"\", el);\n  const types = {\n    housenumber: \"numéro\",\n    street: \"rue\",\n    locality: \"lieu-dit\",\n    hamlet: \"hamlet\", // TODO: Hameau?\n    village: \"village\",\n    city: \"ville\",\n    commune: \"commune\",\n  };\n  title.innerHTML = feature.properties.name;\n  if (types[feature.properties.type]) {\n    L.DomUtil.create(\"span\", \"type\", title).innerHTML =\n      types[feature.properties.type];\n  }\n  if (\n    feature.properties.city &&\n    feature.properties.city !== feature.properties.name\n  ) {\n    details.push(feature.properties.city);\n  }\n  if (feature.properties.context) {\n    details.push(feature.properties.context);\n  }\n  detailsContainer.innerHTML = details.join(\", \");\n}\n\nconst photonControlOptions = {\n  resultsHandler: showSearchPoints,\n  placeholder: \"Ex. 6 quai de la tourelle cergy…\",\n  position: \"topright\",\n  url: API_URL,\n  formatResult,\n  noResultLabel: \"Aucun résultat\",\n  feedbackLabel: \"Signaler\",\n  feedbackEmail: \"julien.noblet+cad-killer@gmail.com\",\n  minChar: (val) => SHORT_CITY_NAMES.indexOf(val) !== -1 || val.length >= 3,\n  submitDelay: 200,\n};\n\n/*\n// not need\nconst photonReverseControlOptions = {\n  resultsHandler: showSearchPoints,\n  position: \"topleft\",\n  url: REVERSE_URL,\n  formatResult,\n  noResultLabel: \"Aucun résultat\",\n  tooltipLabel: \"Cliquer sur la carte pour obtenir l'adresse\"\n};\n*/\n\nconst myPhoton = new L.Control.Photon(photonControlOptions);\n\nexport function photon() {\n  searchPoints.addTo(window.map);\n\n  window.map.addControl(myPhoton);\n  /* eslint-disable no-proto */\n  myPhoton.search.__proto__.setChoice = function setChoice(choice ) {\n    const c = choice || this.RESULTS[this.CURRENT];\n    if (c) {\n      // sendSearch(c.feature); // Stats are not working\n      this.hide();\n      this.input.value = \"\";\n      this.fire(\"selected\", { choice: c.feature });\n      this.onSelected(c.feature);\n    }\n  };\n  /* eslint-enable no-proto*/\n}\n","/**\n * @format\n */\n\nimport L from \"leaflet\";\nimport { ATTRIBUTIONS, CENTER } from \"./config\";\nimport { overlayMaps, baseMaps, layerOSMfr } from \"./layers\";\n//import { dbinfo } from \"./stats\"; // Stats are not working :'(\nimport { photon } from \"./photon\";\n\nrequire(\"leaflet-hash\");\nrequire(\"leaflet.browser.print/dist/leaflet.browser.print.min.js\");\n/**\n * Un grand merci a @etalab, @yohanboniface, @cquest sans qui ce projet n'existerai pas.\n * Une grande partie de ce code vient de @etalab/adresse.data.gouv.fr\n */\n\n// connection à la BD:\n// dbinfo(); // Stats are not working :'(\n\n// Initialisation de leaflet\nwindow.map = L.map(\"map\", {\n  attributionControl: false,\n});\n\nconst layers = L.control.layers(baseMaps, overlayMaps);\n\nL.Icon.Default.imagePath = \"./images/\";\nwindow.map.addLayer(layerOSMfr);\n\nlayers.addTo(window.map);\n\nwindow.map.setView(CENTER, 6);\n\nwindow.map.dragging.enable();\n\nL.control\n  .attribution({\n    position: \"bottomleft\",\n    prefix: ATTRIBUTIONS,\n  })\n  .addTo(window.map);\n\n// ajout hash dans l'URL\nlet hash;\nhash = new L.Hash(window.map);\n\n// Chargement des modules:\n// require('./photon');\nphoton();\nrequire.ensure([\"./reverseLabel\"], function () {\n  require(\"./reverseLabel\");\n});\n/*\n// Removing notes because seems not working!\n// The loading of L.Draw cause also some fails with Jest!\nrequire.ensure([\"./notes\"], function() {\n  require(\"./notes\");\n});\n*/\n//require (\"./geoloc.js\")\n\n// ajout du bouton print\nL.control\n  .browserPrint({\n    printModes: [\n      //L.control.browserPrint.mode.portrait(\"Portrait\", \"A4\"),\n      L.control.browserPrint.mode.landscape(\"Paysage\", \"A4\"),\n      L.control.browserPrint.mode.auto(\"Auto\", \"A4\"),\n      L.control.browserPrint.mode.custom(\"Séléctionnez la zone\", \"A4\"),\n    ],\n  })\n  .addTo(window.map);\n"],"names":["CENTER","API_URL","REVERSE_URL","SHORT_CITY_NAMES","ATTRIBUTIONS","IGN_KEY","IGN_LAYER","IGN_LAYER_LITE","IGN_ORTHO","MY_POUCHDB","LOCAL_POUCHDB","OSM_CREDITENTIALS","NOTE_API","L","layerOSMfr","tileLayer","maxZoom","attribution","layerOSM","layerCadastre","minZoom","overlayCadastre","layerEsriWorldImagery","layerEsriWorldStreetMap","layerIGN","concat","tileSize","overlayBAN","baseMaps","OpenStreetMap","Cadastre","Esri","overlayMaps","require","searchPoints","geoJson","onEachFeature","feature","layer","on","zoom","properties","type","window","map","setView","geometry","coordinates","bindPopup","name","showSearchPoints","geojson","clearLayers","addData","formatResult","el","details","detailsContainer","DomUtil","create","title","types","housenumber","street","locality","hamlet","village","city","commune","innerHTML","push","context","join","photonControlOptions","resultsHandler","placeholder","position","url","noResultLabel","feedbackLabel","feedbackEmail","minChar","val","indexOf","length","submitDelay","myPhoton","Control","Photon","photon","addTo","addControl","search","__proto__","setChoice","choice","c","RESULTS","CURRENT","hide","input","value","fire","onSelected","attributionControl","layers","control","Icon","Default","imagePath","addLayer","dragging","enable","prefix","hash","Hash","ensure","browserPrint","printModes","mode","landscape","auto","custom"],"sourceRoot":""}